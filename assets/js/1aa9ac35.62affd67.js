"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6019],{5680:(e,n,t)=>{t.d(n,{xA:()=>u,yg:()=>y});var a=t(6540);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),d=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=d(e.components);return a.createElement(l.Provider,{value:n},e.children)},p="mdxType",i={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=d(t),m=r,y=p["".concat(l,".").concat(m)]||p[m]||i[m]||s;return t?a.createElement(y,o(o({ref:n},u),{},{components:t})):a.createElement(y,o({ref:n},u))}));function y(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var s=t.length,o=new Array(s);o[0]=m;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=e,c[p]="string"==typeof e?e:r,o[1]=c;for(var d=2;d<s;d++)o[d]=t[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},8605:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>i,frontMatter:()=>s,metadata:()=>c,toc:()=>d});var a=t(8168),r=(t(6540),t(5680));const s={},o="OpenGauss",c={unversionedId:"study/db/SQL/OpenGauss",id:"study/db/SQL/OpenGauss",title:"OpenGauss",description:"\u5b98\u7f51 https://opengauss.org/zh/",source:"@site/docs/study/db/SQL/OpenGauss.md",sourceDirName:"study/db/SQL",slug:"/study/db/SQL/OpenGauss",permalink:"/docs/study/db/SQL/OpenGauss",draft:!1,tags:[],version:"current",lastUpdatedAt:1729088763,formattedLastUpdatedAt:"2024\u5e7410\u670816\u65e5",frontMatter:{},sidebar:"studySidebar",previous:{title:"MySQL",permalink:"/docs/study/db/SQL/MySQL"},next:{title:"PostgreSQL",permalink:"/docs/study/db/SQL/PostgreSQL"}},l={},d=[{value:"\u4fee\u6539\u6700\u5927\u8fde\u63a5\u6570\u62a5\u9519",id:"\u4fee\u6539\u6700\u5927\u8fde\u63a5\u6570\u62a5\u9519",level:3},{value:"max_dynamic_memory \u5185\u5b58\u4e0d\u8db3",id:"max_dynamic_memory-\u5185\u5b58\u4e0d\u8db3",level:3}],u={toc:d},p="wrapper";function i(e){let{components:n,...t}=e;return(0,r.yg)(p,(0,a.A)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"opengauss"},"OpenGauss"),(0,r.yg)("p",null,"\u5b98\u7f51 ",(0,r.yg)("a",{parentName:"p",href:"https://opengauss.org/zh/"},"https://opengauss.org/zh/")),(0,r.yg)("p",null,"\u5bf9\u6807\u7684\u662fPostgreSQL"),(0,r.yg)("h3",{id:"\u4fee\u6539\u6700\u5927\u8fde\u63a5\u6570\u62a5\u9519"},"\u4fee\u6539\u6700\u5927\u8fde\u63a5\u6570\u62a5\u9519"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"2024-05-14 10:02:06.004 [unknown] [unknown] localhost 140450292528512 0[0:0#0]  0 [CACHE] LOG:  set data cache  size(402653184)\n2024-05-14 10:02:06.247 [unknown] [unknown] localhost 140450292528512 0[0:0#0]  0 [BACKEND] FATAL:  could not create semaphores: No space left on device\n2024-05-14 10:02:06.247 [unknown] [unknown] localhost 140450292528512 0[0:0#0]  0 [BACKEND] DETAIL:  Failed system call was semget(5432129, 17, 03600).\n2024-05-14 10:02:06.247 [unknown] [unknown] localhost 140450292528512 0[0:0#0]  0 [BACKEND] HINT:  This error does *not* mean that you have run out of disk space.  It occurs when either the system limit for the maximum number of semaphore sets (SEMMNI), or the system wide maximum number of semaphores (SEMMNS), would be exceeded.  You need to raise the respective kernel parameter.  Alternatively, reduce openGauss's consumption of semaphores by reducing its max_connections parameter.\n        The openGauss documentation contains more information about configuring your system for openGauss.\n2024-05-14 10:02:06.247 [unknown] [unknown] localhost 140450292528512 0[0:0#0]  0 [BACKEND] BACKTRACELOG:  tid[1]'s backtrace:\n        gaussdb(+0xe3a41e) [0x55c87d3c041e]\n        gaussdb(_Z9errfinishiz+0x441) [0x55c87d3b8651]\n        gaussdb(+0xbb6618) [0x55c87d13c618]\n        gaussdb(_Z17PGSemaphoreCreateP15PGSemaphoreData+0x9c) [0x55c87d13c93c]\n        gaussdb(_Z14InitProcGlobalv+0x7dd) [0x55c87e18bddd]\n        gaussdb(_Z31CreateSharedMemoryAndSemaphoresbi+0x3a5) [0x55c87e165605]\n        gaussdb(_Z14PostmasterMainiPPc+0x183f) [0x55c87d982a4f]\n        gaussdb(main+0x3f2) [0x55c87ce545f2]\n        /usr/lib64/libc.so.6(+0x2d210) [0x7fbd21d16210]\n        /usr/lib64/libc.so.6(__libc_start_main+0x7c) [0x7fbd21d162bc]\n        gaussdb(_start+0x25) [0x55c87cec57f5]\n        Use addr2line to get pretty function name and line\n\n2024-05-14 10:02:06.342 [unknown] [unknown] localhost 140450292528512 0[0:0#0]  0 [BACKEND] LOG:  FiniNuma allocIndex: 0.\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"[root@f37c6d33715e /]# ipcs -ls\n\n------ Semaphore Limits --------\nmax number of arrays = 128\nmax semaphores per array = 250\nmax semaphores system wide = 32000\nmax ops per semop call = 32\nsemaphore max value = 32767\n\n[root@f37c6d33715e /]# cat  /proc/sys/kernel/sem\n250     32000   32      128\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"\u4fee\u6539 vi /etc/sysctl.conf \u7684\u4ee5\u4e0b\u53c2\u6570\nkernel.sem = 50100 128256000 50100 2560\nsysctl -p \u751f\u6548\n\u91cd\u542f\u6570\u636e\u5e93\u5373\u53ef\ndocker cp ./postgresql.conf f37c6d33715e:/var/lib/opengauss/data/postgresql.conf\ndocker cp ./sysctl.conf f37c6d33715e:/etc/sysctl.conf\ndocker restart f37c6d33715e\ndocker ps -a | grep opengauss\n/var/lib/opengauss/data/postgresql.conf\n")),(0,r.yg)("h3",{id:"max_dynamic_memory-\u5185\u5b58\u4e0d\u8db3"},"max_dynamic_memory \u5185\u5b58\u4e0d\u8db3"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-shell"},"#\nsu omm\n#\ngs_om -t status --detail\ngs_om -t start\ngs_om -t stop\n#\ngs_guc reload -N all -I all -c 'default_transaction_read_only = off'\ngs_guc reload -N all -I all -c 'default_transaction_read_only = on'\n#\ngs_ctl stop -D /opt/openGauss5.0/install/data/dn\ngs_ctl start -D /opt/openGauss5.0/install/data/dn\ngs_ctl restart -D /opt/openGauss5.0/install/data/dn\n\ngs_ctl start -D /home/omm/data/dn1\ngs_ctl stop -D /home/omm/data/dn1\n#\nSHOW data_directory;\n#\ngsql -d postgres -p 5432\n#\nalter system set data_directory='/home/omm/data/dn1';\nalter system set data_directory='/opt/openGauss5.0/install/data/dn';\n")))}i.isMDXComponent=!0}}]);