### 系统平均负载和CPU使用率

现实工作中，我们经常容易把平均负载值和CPU使用率混淆，所以在这里，我也做一个区分。

可能你会疑惑，既然平均负载代表的是活跃进程数，那平均负载高了，不就意味着CPU使用率高吗？

我们还是要回到平均负载的含义上来，平均负载是指单位时间内，处于可运行状态和不可中断状态的进程数。所以，它不仅包括了**正在使用CPU的进程**，还包括**等待CPU和等待I/O的进程**。

> 而CPU使用率，是单位时间内CPU繁忙情况的统计，跟平均负载并不一定完全对应。比如：
> - CPU密集型进程，使用大量CPU会导致平均负载升高，此时两者是一致的。
> - I/O密集型进程，等待I/O也会导致平均负载升高，但CPU使用率不一定很高。
> - 大量等待CPU的进程调度也会导致平均负载升高，此时的CPU使用率也会比较高。


**那么，在实际生产环境中，平均负载多高时，需要我们重点关注呢？**

在我看来，**当平均负载高于逻辑CPU数量的70%的时候**，你就应该分析排查负载高的问题了。一旦负载过高，就可能导致进程响应变慢，进而影响服务的正常功能。

但是，70%这个数字并不是绝对的，最推荐的方法，还是把系统的平均负载监控起来，然后根据更多的历史数据，判断负载的变化趋势。当发现负载有明显升高趋势时，比如说负载翻倍了，你再去做分析和调查。
