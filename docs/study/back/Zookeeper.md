---
sidebar_position: 2
---

### Zookeeper概述

Zookeeper 是一个分布式协调服务的开源框架。主要用来解决分布式集群中应用系统的一致性问题，例如怎样避免同时操作同一数据造成脏读的问题。

ZooKeeper 本质上是一个分布式的小文件存储系统。提供基于类似于文件系 统的目录树方式的数据存储，并且可以对树中的节点进行有效管理。从而用来维护和监控你存储的数据的状态变化。通过监控这些数据状态的变化，从而可以达 到基于数据的集群管理。诸如：`统一命名服务`、`分布式配置管理`、`分布式消息队列`、`分布式锁`、`分布式协调`等功能。

上面的解释有点抽象，简单来说zookeeper=文件系统+监听通知机制。

1. 文件系统，Zookeeper维护一个类似文件系统的数据结构，每个子目录项如 NameService 都被称作为 znode(目录节点)，和文件系统一样，我们能够自由的增加、删除znode，在一个znode下增加、删除子znode，唯一的不同在于znode是可以存储数据的。
2. 监听通知机制，客户端注册监听它关心的目录节点，当目录节点发生变化（数据改变、被删除、子目录节点增加删除）时，zookeeper会通知客户端。

### Zookeeper 特性

1. `全局数据一致`：每个 server 保存一份相同的数据副本，client 无论连 接到哪个 server，展示的数据都是一致的，这是最重要的特征；

2. `可靠性`：如果消息被其中一台服务器接受，那么将被所有的服务器接受。

3. `顺序性`：包括全局有序和偏序两种：全局有序是指如果在一台服务器上 消息 a 在消息 b 前发布，则在所有 Server 上消息 a 都将在消息 b 前被 发布；偏序是指如果一个消息 b 在消息 a 后被同一个发送者发布，a 必将排在 b 前面。

4. `数据更新原子性`：一次数据更新要么成功（半数以上节点成功），要么失 败，不存在中间状态；

5. `实时性`：Zookeeper 保证客户端将在一个时间间隔范围内获得服务器的更新信息，或者服务器失效的信息。

